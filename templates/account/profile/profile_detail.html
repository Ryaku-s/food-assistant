{% extends 'catalog/index.html' %}

{% load catalog_tag %}

{% block account_profile_settings %}active{% endblock %}

{% block content %}
<div class="col-7 my-5 mx-auto">
  <div style="background-color: white; padding: min(3rem, 5%); " class="rounded border-top mb-3 border-success shadow-sm">
    <div class="mx-auto row col-sm-12">
      <div style="position:relative;">
        <span class="h3 mb-2">Основная информация</span>
        {% if request.user.is_active %}
            {% if is_followed %}
              <form action="{% url 'account_profile_unfollow' pk=user.pk %}" method="post">
                {% csrf_token %}
                <button type="submit" class="btn btn-outline-danger h1" style="right: 0; top: 0; position: absolute;">
                  Отписаться
                </button>
              </from>
            {% else %}
              <form action="{% url 'account_profile_follow' pk=user.pk %}" method="post">
                {% csrf_token %}
                <button type="submit" class="btn btn-outline-success h1" style="right: 0; top: 0; position: absolute;">
                  Подписаться
                </button>
              </form>
            {% endif %}
          {% endif %}
      </div>
      <div class="row">
        <div class="col-sm-3 my-2">
          {% if user.avatar %}
            <img style="object-fit: cover; max-width: 125px;" width="125px" height="125px" class="rounded-circle avatar" src="{{ user.avatar.url }}">
          {% endif %}
        </div>
        <div class="col-sm-8 my-auto">
          <hr>
          <div class="col-sm-12 row mx-auto my-2">
            <p class="text-muted my-auto col">Отображаемое имя</p>
            <span style="max-width: 200px; overflow: hidden;" class="col text-muted">{% if user.display_name %}{{ user.display_name }}{% else %}{{ user.email }}{% endif %}</span>
          </div>
          <hr>
        </div>
      </div>
      <div class="col-sm-12 row mx-auto my-3">
        <h5 class="text-muted my-auto col-sm-12">О себе</h5>
        <hr class="mt-3">
        <div class="col text-muted">{% if user.about %}{{ user.about }}{% else %}Не указано{% endif %}</div>
      </div>
    </div>
  </div>
  <div style="background-color: white; padding: min(3rem, 5%); " class="rounded border-top mx-1 mb-3 border-success shadow-sm">
    <div class="mx-auto row col-sm-12">
        <h3>Рецепты</h3>
        {% if recipes %}
        {% else %}
          <p class="text-muted mt-3">Здесь пока нет рецептов</p>
        {% endif %}
    </div>
  </div>
</div>
{% endblock%}